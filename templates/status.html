{% extends "base.html" %}

{% block body_tag %}
  class="status"
{% endblock body_tag %}

{% block title %}
  {{ status.name }}
{% endblock title %}

{% block header %}
  {% include "components/status-nav.html" %}
{% endblock header %}

{% block content %}
  <h1>{{ status.name }}</h1>

  {% if finished_counts %}
    <dl class="finished-counts">
      {% for count in finished_counts reversed %}
        <div>
          <dt>{{ count.readings__end_date__year }}</dt>
          <dd>
            {{ count.count }}
          </dd>
        </div>
      {% endfor %}
    </dl>
  {% endif %}

  <ul>
    {% for book in books %}
      <li>
        <a href="#{{ book.id }}"
           onclick="document.querySelector('#book-{{ book.id }}').showModal()">
          {% with book.covers.all|first as cover %}
            <img src="{{ cover.image.url }}"
                 alt="{{ cover }}"
                 width="150"
                 height="auto"
                 title="{{ book }}">
          {% endwith %}
        </a>
        {% include "components/status-modal.html" %}
      </li>
    {% endfor %}
  </ul>

{% endblock content %}
